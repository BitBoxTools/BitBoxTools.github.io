var We=Object.defineProperty;var Xe=(t,e,n)=>e in t?We(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>(Xe(t,typeof e!="symbol"?e+"":e,n),n),_e=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var f=(t,e,n)=>(_e(t,e,"read from private field"),n?n.call(t):e.get(t)),C=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ge=(t,e,n,s)=>(_e(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n);var p=(t,e,n)=>(_e(t,e,"access private method"),n);import{r as J,j as l}from"./index-04beb6f7.js";import{a as Z,C as Qe}from"./axios-9327ffc9.js";import{U as et,S as tt,D as nt,n as K,e as st}from"./save_excel-e9c1eacd.js";import{F as $,M as ve,T as De,a as rt,P as Be,D as Ue}from"./index-68eba201.js";import{I as xe,S as w,P as it}from"./index-3f4e20f6.js";import{B as P,E as at}from"./EditOutlined-87c9682f.js";import{S as lt}from"./index-067cc3ea.js";import{L as ot}from"./index-32987615.js";const ct={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function te(t,e){try{let n=ct[e];if(!n)return"Error: Invalid Network Name";let i=(await Z.post(n,{jsonrpc:"2.0",method:"eth_getBalance",params:[t,"latest"],id:1})).data.result;return(parseInt(i,16)/10**18).toFixed(3)}catch(n){return console.error(n),"Error"}}const dt={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function ne(t,e){try{let n=dt[e];if(!n)return"Error: Invalid Network Name";const i=(await Z.post(n,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[t,"latest"],id:1})).data.result;return parseInt(i,16)}catch(n){return console.error(n),"Error"}}async function se(t){try{let e="https://zksync2-mainnet-explorer.zksync.io/address/"+t;const n=await Z.get(e);let s,i,d;return"0x0000000000000000000000000000000000000000"in n.data.info.balances?i=(parseInt(n.data.info.balances["0x0000000000000000000000000000000000000000"].balance,16)/10**18).toFixed(3):i=0,"0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4"in n.data.info.balances?d=(parseInt(n.data.info.balances["0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4"].balance,16)/10**6).toFixed(3):d=0,s=n.data.info.sealedNonce,{balance2:i,tx2:s,usdcBalance:d}}catch(e){return console.error(e),{balance2:"Error",tx2:"Error",usdcBalance:"Error"}}}async function re(t){try{let e="https://api.zksync.io/jsrpc";const n=await Z.post(e,{id:1,jsonrpc:"2.0",method:"account_info",params:[t]});let s;"ETH"in n.data.result.committed.balances?s=(n.data.result.committed.balances.ETH/10**18).toFixed(3):s=0;let i=n.data.result.committed.nonce;return{balance1:s,tx1:i}}catch(e){return console.error(e),{balance1:"Error",tx1:"Error"}}}const ut="6.3.0";function mt(t,e,n){const s=e.split("|").map(d=>d.trim());for(let d=0;d<s.length;d++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}function Je(t,e,n){for(let s in e){let i=e[s];const d=n?n[s]:null;d&&mt(i,d,s),Object.defineProperty(t,s,{enumerable:!0,value:i,writable:!1})}}function q(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(q).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let s=0;s<t.length;s++)n+=e[t[s]>>4],n+=e[t[s]&15];return n}if(typeof t=="object"&&typeof t.toJSON=="function")return q(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map(n=>`${q(n)}: ${q(t[n])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ft(t,e,n){{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${q(n)}`);for(const d in n){const h=n[d];i.push(d+"="+q(h))}}i.push(`code=${e}`),i.push(`version=${ut}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Je(s,{code:e}),n&&Object.assign(s,n),s}function A(t,e,n,s){if(!t)throw ft(e,n,s)}function _(t,e,n,s){A(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"){const n=String.fromCharCode(233).normalize("NFD"),s=String.fromCharCode(101,769);if(n!==s)throw new Error("broken")}t.push(e)}catch{}return t},[]);function ht(t,e,n){if(n==null&&(n=""),t!==e){let s=n,i="new";n&&(s+=".",i+=" "+n),A(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function gt(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((t.length-2)/2);let i=2;for(let d=0;d<s.length;d++)s[d]=parseInt(t.substring(i,i+2),16),i+=2;return s}_(!1,"invalid BytesLike value",e||"value",t)}function xt(t,e){return gt(t,e,!1)}const Me=BigInt(0),W=BigInt(1),X=9007199254740991;function Se(t,e){const n=Re(t,"value"),s=BigInt(ye(e,"width"));if(A(n>>s===Me,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>s-W){const i=(W<<s)-W;return-((~n&i)+W)}return n}function Ce(t,e){const n=Re(t,"value"),s=BigInt(ye(e,"bits"));return n&(W<<s)-W}function Ae(t,e){switch(typeof t){case"bigint":return t;case"number":return _(Number.isInteger(t),"underflow",e||"value",t),_(t>=-X&&t<=X,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){_(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}_(!1,"invalid BigNumberish value",e||"value",t)}function Re(t,e){const n=Ae(t,e);return A(n>=Me,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Oe="0123456789abcdef";function yt(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Oe[n>>4],e+=Oe[n&15];return BigInt(e)}return Ae(t)}function ye(t,e){switch(typeof t){case"bigint":return _(t>=-X&&t<=X,"overflow",e||"value",t),Number(t);case"number":return _(Number.isInteger(t),"underflow",e||"value",t),_(t>=-X&&t<=X,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return ye(BigInt(t),e)}catch(n){_(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}_(!1,"invalid numeric value",e||"value",t)}const pt=BigInt(-1),v=BigInt(0),Q=BigInt(1),bt=BigInt(5),Y={};let ee="0000";for(;ee.length<80;)ee+=ee;function V(t){let e=ee;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function ie(t,e,n){const s=BigInt(e.width);if(e.signed){const i=Q<<s-Q;A(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>v?t=Se(Ce(t,s),s):t=-Se(Ce(-t,s),s)}else{const i=Q<<s;A(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Q}return t}function we(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,s=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const d=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);_(d,"invalid fixed format","format",t),e=d[1]!=="u",n=parseInt(d[2]),s=parseInt(d[3])}}else if(t){const d=t,h=(y,j,N)=>d[y]==null?N:(_(typeof d[y]===j,"invalid fixed format ("+y+" not "+j+")","format."+y,d[y]),d[y]);e=h("signed","boolean",e),n=h("width","number",n),s=h("decimals","number",s)}_(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),_(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(s);return{signed:e,width:n,decimals:s,name:i}}function kt(t,e){let n="";t<v&&(n="-",t*=pt);let s=t.toString();if(e===0)return n+s;for(;s.length<=e;)s=ee+s;const i=s.length-e;for(s=s.substring(0,i)+"."+s.substring(i);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return n+s}var B,x,I,L,H,U,F,oe,Ie,ce,Ne,de,ze,ue,je;const M=class{constructor(e,n,s){C(this,L);C(this,U);C(this,oe);C(this,ce);C(this,de);C(this,ue);ke(this,"format");C(this,B,void 0);C(this,x,void 0);C(this,I,void 0);ke(this,"_value");ht(e,Y,"FixedNumber"),ge(this,x,n),ge(this,B,s);const i=kt(n,s.decimals);Je(this,{format:s.name,_value:i}),ge(this,I,V(s.decimals))}get signed(){return f(this,B).signed}get width(){return f(this,B).width}get decimals(){return f(this,B).decimals}get value(){return f(this,x)}addUnsafe(e){return p(this,oe,Ie).call(this,e)}add(e){return p(this,oe,Ie).call(this,e,"add")}subUnsafe(e){return p(this,ce,Ne).call(this,e)}sub(e){return p(this,ce,Ne).call(this,e,"sub")}mulUnsafe(e){return p(this,de,ze).call(this,e)}mul(e){return p(this,de,ze).call(this,e,"mul")}mulSignal(e){p(this,L,H).call(this,e);const n=f(this,x)*f(e,x);return A(n%f(this,I)===v,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),p(this,U,F).call(this,n/f(this,I),"mulSignal")}divUnsafe(e){return p(this,ue,je).call(this,e)}div(e){return p(this,ue,je).call(this,e,"div")}divSignal(e){A(f(e,x)!==v,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,L,H).call(this,e);const n=f(this,x)*f(this,I);return A(n%f(e,x)===v,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),p(this,U,F).call(this,n/f(e,x),"divSignal")}cmp(e){let n=this.value,s=e.value;const i=this.decimals-e.decimals;return i>0?s*=V(i):i<0&&(n*=V(-i)),n<s||n>s?-1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=f(this,x);return f(this,x)<v&&(e-=f(this,I)-Q),e=f(this,x)/f(this,I)*f(this,I),p(this,U,F).call(this,e,"floor")}ceiling(){let e=f(this,x);return f(this,x)>v&&(e+=f(this,I)-Q),e=f(this,x)/f(this,I)*f(this,I),p(this,U,F).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,s=bt*V(n-1);let i=this.value+s;const d=V(n);return i=i/d*d,ie(i,f(this,B),"round"),new M(Y,i,f(this,B))}isZero(){return f(this,x)===v}isNegative(){return f(this,x)<v}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return M.fromString(this.toString(),e)}static fromValue(e,n,s){n==null&&(n=0);const i=we(s);let d=Ae(e,"value");const h=n-i.decimals;if(h>0){const y=V(h);A(d%y===v,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),d/=y}else h<0&&(d*=V(-h));return ie(d,i,"fromValue"),new M(Y,d,i)}static fromString(e,n){const s=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);_(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",e);const i=we(n);let d=s[2]||"0",h=s[3]||"";for(;h.length<i.decimals;)h+=ee;A(h.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),h=h.substring(0,i.decimals);const y=BigInt(s[1]+d+h);return ie(y,i,"fromString"),new M(Y,y,i)}static fromBytes(e,n){let s=yt(xt(e,"value"));const i=we(n);return i.signed&&(s=Se(s,i.width)),ie(s,i,"fromBytes"),new M(Y,s,i)}};let Te=M;B=new WeakMap,x=new WeakMap,I=new WeakMap,L=new WeakSet,H=function(e){_(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},U=new WeakSet,F=function(e,n){return e=ie(e,f(this,B),n),new M(Y,e,f(this,B))},oe=new WeakSet,Ie=function(e,n){return p(this,L,H).call(this,e),p(this,U,F).call(this,f(this,x)+f(e,x),n)},ce=new WeakSet,Ne=function(e,n){return p(this,L,H).call(this,e),p(this,U,F).call(this,f(this,x)-f(e,x),n)},de=new WeakSet,ze=function(e,n){return p(this,L,H).call(this,e),p(this,U,F).call(this,f(this,x)*f(e,x)/f(this,I),n)},ue=new WeakSet,je=function(e,n){return A(f(e,x)!==v,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,L,H).call(this,e),p(this,U,F).call(this,f(this,x)*f(this,I)/f(e,x),n)};const _t=["wei","kwei","mwei","gwei","szabo","finney","ether"];function wt(t,e){let n=18;if(typeof e=="string"){const s=_t.indexOf(e);_(s>=0,"invalid unit","unit",e),n=3*s}else e!=null&&(n=ye(e,"unit"));return Te.fromValue(t,n,{decimals:n}).toString()}function Fe(t){return wt(t,18)}function St(t){return`${t.getUTCFullYear()}-${t.getUTCMonth()+1}-${t.getUTCDate()}`}function Tt(t){t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));let e=new Date(Date.UTC(t.getUTCFullYear(),0,1)),n=Math.ceil(((t-e)/864e5+1)/7);return t.getUTCFullYear()+"W"+n}function It(t){return console.log(t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)),t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)}async function Le(t,e,n,s,i,d,h,y){const j=new Set,N=new Set,S=new Set;for(let T=0;T<t.length;T++){const E=new Date(t[T].receivedAt);if(console.log(E),j.add(St(E)),N.add(Tt(E)),S.add(It(E)),console.log(S.size),t[T].isL1Originated===!0){i++;const D=Fe(t[T].data.value);d+=parseFloat(D)}else if(t[T].data.contractAddress==="0x000000000000000000000000000000000000800a"){h++;const D=Fe(t[T].data.value);y+=parseFloat(D)}}return e+=j.size,n+=N.size,s+=S.size,[e,n,s,i,d,h,y]}async function ae(t){try{let e=0,n=0,s=0,i=0,d=0,h=0,y=0,j=0,N=null,S=null;const T="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress="+t,E=await Z.get(T),D=E.data.total;if([e,n,s,i,d,h,y]=await Le(E.data.list,e,n,s,i,d,h,y),D>100)for(N=E.data.list[0].blockNumber,S=E.data.list[0].indexInBlock;;){let me=`https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress=${t}`;N!==void 0&&S!==void 0&&j!==0&&(me+=`&fromBlockNumber=${N}&fromTxIndex=${S}&offset=${j}`);const fe=await Z.get(me),he=fe.data.list.length;if([e,n,s,i,d,h,y]=await Le(fe.data.list,e,n,s,i,d,h,y),he===100)j+=he;else break}return{dayActivity:e,weekActivity:n,monthActivity:s,l1Tol2Times:i,l1Tol2Amount:d.toFixed(3),l2Tol1Times:h,l2Tol1Amount:y.toFixed(3)}}catch(e){return console.log(e),{dayActivity:"Error",weekActivity:"Error",monthActivity:"Error",l1Tol2Times:"Error",l1Tol2Amount:"Error",l2Tol1Times:"Error",l2Tol1Amount:"Error"}}}async function le(t){const e="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=5&direction=older&accountAddress="+t;try{const n=await Z.get(e);if(n.data.total===0)return{zkSyncLastTx:"无交易"};{const s=n.data.list[0].receivedAt,i=new Date(s),d=8,h=new Date(i.getTime()+d*3600*1e3),y=new Date,N=new Date(y.getTime()+d*3600*1e3)-h,S=Math.floor(N/(1e3*60*60)),T=Math.floor(S/24);return T>0?{zkSyncLastTx:`${T} 天前`}:S>0?{zkSyncLastTx:`${S} 小时前`}:{zkSyncLastTx:"刚刚"}}}catch(n){return console.error(n),{zkSyncLastTx:"Error"}}}const{Content:Nt}=ot,{TextArea:zt}=xe,{Column:b,ColumnGroup:G}=De;function Lt(){const[t,e]=J.useState([]),[n,s]=J.useState(!1),[i]=$.useForm(),[d,h]=J.useState([]),[y]=$.useForm(),[j,N]=J.useState(!1),[S,T]=J.useState(!1),[E,D]=J.useState(!1),me=async()=>{try{const r=await y.validateFields();if(r.address.length!==42){K.error({message:"错误",description:"请输入正确的地址"},2);return}N(!1);const u=t.findIndex(o=>o.address===r.address);if(u!==-1){e(t.map((a,m)=>m===u?{...a,name:r.name}:a));const o=[...t];se(r.address).then(({balance2:a,tx2:m,usdcBalance:c})=>{o[u]={...o[u],zks2_balance:a,zks2_tx_amount:m,zks2_usdcBalance:c},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),le(r.address).then(({zkSyncLastTx:a})=>{o[u]={...o[u],zks2_last_tx:a},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),re(r.address).then(({balance1:a,tx1:m})=>{o[u]={...o[u],zks1_balance:a,zks1_tx_amount:m},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),te(r.address,"ethereum").then(a=>{o[u]={...o[u],eth_balance:a},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),ne(r.address,"ethereum").then(a=>{o[u]={...o[u],eth_tx_amount:a},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),ae(r.address).then(({dayActivity:a,weekActivity:m,monthActivity:c,l1Tol2Times:g,l1Tol2Amount:k,l2Tol1Times:z,l2Tol1Amount:O})=>{o[u]={...o[u],dayActivity:a,weekActivity:m,monthActivity:c,l1Tol2Times:g,l1Tol2Amount:k,l2Tol1Times:z,l2Tol1Amount:O},e(o),localStorage.setItem("addresses",JSON.stringify(t))})}else{const o={key:t.length.toString(),name:r.name,address:r.address,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks2_usdcBalance:null,zks2_last_tx:null,zks1_balance:null,zks1_tx_amount:null,dayActivity:null,weekActivity:null,monthActivity:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null},a=[...t,o];e(a),se(r.address).then(({balance2:m,tx2:c,usdcBalance:g})=>{o.zks2_balance=m,o.zks2_tx_amount=c,o.zks2_usdcBalance=g,e([...a]),localStorage.setItem("addresses",JSON.stringify(a))}),le(r.address).then(({zkSyncLastTx:m})=>{o.zks2_last_tx=m,e([...a]),localStorage.setItem("addresses",JSON.stringify(a))}),re(r.address).then(({balance1:m,tx1:c})=>{o.zks1_balance=m,o.zks1_tx_amount=c,e([...a]),localStorage.setItem("addresses",JSON.stringify(a))}),te(r.address,"ethereum").then(m=>{o.eth_balance=m,e([...a]),localStorage.setItem("addresses",JSON.stringify(a))}),ne(r.address,"ethereum").then(m=>{o.eth_tx_amount=m,e([...a]),localStorage.setItem("addresses",JSON.stringify(a))}),ae(r.address).then(({dayActivity:m,weekActivity:c,monthActivity:g,l1Tol2Times:k,l1Tol2Amount:z,l2Tol1Times:O,l2Tol1Amount:R})=>{o.dayActivity=m,o.weekActivity=c,o.monthActivity=g,o.l1Tol2Times=k,o.l1Tol2Amount=z,o.l2Tol1Times=O,o.l2Tol1Amount=R,e([...a]),localStorage.setItem("addresses",JSON.stringify(a))})}}catch(r){K.error({message:"错误",description:r.message},2)}finally{y.resetFields()}},fe=async()=>{if(!d.length){K.error({message:"错误",description:"请先选择要刷新的地址"},2);return}T(!0);try{const r=[...t];for(let u of d){const o=r.findIndex(a=>a.key===u);if(o!==-1){const a=r[o];a.eth_balance=null,a.eth_tx_amount=null,a.zks1_balance=null,a.zks1_tx_amount=null,a.zks2_balance=null,a.zks2_tx_amount=null,a.zks2_usdcBalance=null,a.zks2_last_tx=null,a.dayActivity=null,a.weekActivity=null,a.monthActivity=null,a.l1Tol2Times=null,a.l1Tol2Amount=null,a.l2Tol1Times=null,a.l2Tol1Amount=null,e([...r]),se(a.address).then(({balance2:m,tx2:c,usdcBalance:g})=>{a.zks2_balance=m,a.zks2_tx_amount=c,a.zks2_usdcBalance=g,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),le(a.address).then(({zkSyncLastTx:m})=>{a.zks2_last_tx=m,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),re(a.address).then(({balance1:m,tx1:c})=>{a.zks1_balance=m,a.zks1_tx_amount=c,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),te(a.address,"ethereum").then(m=>{a.eth_balance=m,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),ne(a.address,"ethereum").then(m=>{a.eth_tx_amount=m,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),ae(a.address).then(({dayActivity:m,weekActivity:c,monthActivity:g,l1Tol2Times:k,l1Tol2Amount:z,l2Tol1Times:O,l2Tol1Amount:R})=>{a.dayActivity=m,a.weekActivity=c,a.monthActivity=g,a.l1Tol2Times=k,a.l1Tol2Amount=z,a.l2Tol1Times=O,a.l2Tol1Amount=R,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))})}}}catch(r){K.error({message:"错误",description:r.message},2)}finally{T(!1),h([])}},he=async()=>{try{const u=(await i.validateFields()).addresses.split(`
`),o=[...t];for(let a of u){if(a=a.trim(),a.length!==42){K.error({message:"错误",description:"请输入正确的地址"});continue}const m=o.findIndex(c=>c.address===a);if(m!==-1){const c=[...o];se(a).then(({balance2:g,tx2:k,usdcBalance:z})=>{c[m]={...c[m],zks2_balance:g,zks2_tx_amount:k,zks2_usdcBalance:z},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),le(a).then(({zkSyncLastTx:g})=>{c[m]={...c[m],zks2_last_tx:g},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),re(a).then(({balance1:g,tx1:k})=>{c[m]={...c[m],zks1_balance:g,zks1_tx_amount:k},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),te(a,"ethereum").then(g=>{c[m]={...c[m],eth_balance:g},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),ne(a,"ethereum").then(g=>{c[m]={...c[m],eth_tx_amount:g},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),ae(a).then(({dayActivity:g,weekActivity:k,monthActivity:z,l1Tol2Times:O,l1Tol2Amount:R,l2Tol1Times:pe,l2Tol1Amount:be})=>{c[m]={...c[m],dayActivity:g,weekActivity:k,monthActivity:z,l1Tol2Times:O,l1Tol2Amount:R,l2Tol1Times:pe,l2Tol1Amount:be},e(c),localStorage.setItem("addresses",JSON.stringify(c))})}else{const c={key:o.length.toString(),address:a,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks2_usdcBalance:null,zks1_balance:null,zks1_tx_amount:null,zks2_last_tx:null,dayActivity:null,weekActivity:null,monthActivity:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null};o.push(c),e(o),se(a).then(({balance2:g,tx2:k,usdcBalance:z})=>{c.zks2_balance=g,c.zks2_tx_amount=k,c.zks2_usdcBalance=z,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),le(a).then(({zkSyncLastTx:g})=>{c.zks2_last_tx=g,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),re(a).then(({balance1:g,tx1:k})=>{c.zks1_balance=g,c.zks1_tx_amount=k,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),te(a,"ethereum").then(g=>{c.eth_balance=g,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),ne(a,"ethereum").then(g=>{c.eth_tx_amount=g,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),ae(a).then(({dayActivity:g,weekActivity:k,monthActivity:z,l1Tol2Times:O,l1Tol2Amount:R,l2Tol1Times:pe,l2Tol1Amount:be})=>{c.dayActivity=g,c.weekActivity=k,c.monthActivity=z,c.l1Tol2Times=O,c.l1Tol2Amount=R,c.l2Tol1Times=pe,c.l2Tol1Amount=be,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))})}}s(!1)}catch(r){K.error({message:"错误",description:r.message})}finally{i.resetFields(),h([])}},$e=()=>{N(!0)},Pe=()=>{s(!0)},Ve=()=>{st(t,"walletInfo")};J.useEffect(()=>{D(!0);const r=localStorage.getItem("addresses");setTimeout(()=>{D(!1)},500),r&&e(JSON.parse(r))},[]);const He=()=>{N(!1)},Ze=r=>{e(t.filter(u=>u.key!==r)),localStorage.setItem("addresses",JSON.stringify(t.filter(u=>u.key!==r)))},Ke=()=>{e(t.filter(r=>!d.includes(r.key))),localStorage.setItem("addresses",JSON.stringify(t.filter(r=>!d.includes(r.key)))),h([])},Ye={onChange:(r,u)=>{h(r)}},Ge=()=>{s(!1)},[qe,Ee]=J.useState(null);return l.jsx("div",{children:l.jsxs(Nt,{children:[l.jsx(ve,{title:"批量添加地址",open:n,onOk:he,onCancel:Ge,okButtonProps:{loading:S},okText:"添加地址",cancelText:"取消",children:l.jsx($,{form:i,layout:"vertical",children:l.jsx($.Item,{label:"地址",name:"addresses",rules:[{required:!0}],children:l.jsx(zt,{placeholder:"请输入地址，每行一个",style:{width:"500px",height:"200px"}})})})}),l.jsx(ve,{title:"添加地址",open:j,onOk:me,onCancel:He,okButtonProps:{loading:S},okText:"添加地址",cancelText:"取消",children:l.jsxs($,{form:y,layout:"vertical",children:[l.jsx($.Item,{label:"地址",name:"address",rules:[{required:!0}],children:l.jsx(xe,{placeholder:"请输入地址"})}),l.jsx($.Item,{label:"备注",name:"name",children:l.jsx(xe,{placeholder:"请输入备注"})})]})}),l.jsx(w,{spinning:E,children:l.jsxs(De,{rowSelection:{type:"checkbox",...Ye},dataSource:t,pagination:!1,bordered:!0,style:{marginBottom:"20px"},size:"small",children:[l.jsx(b,{title:"#",align:"center",render:(r,u,o)=>o+1},"index"),l.jsx(b,{title:"备注",dataIndex:"name",align:"center",className:"",render:(r,u)=>u.key===qe?l.jsx(xe,{placeholder:"请输入备注",defaultValue:r,onPressEnter:a=>{u.name=a.target.value,e([...t]),localStorage.setItem("addresses",JSON.stringify(t)),Ee(null)}}):l.jsxs(l.Fragment,{children:[l.jsx(rt,{color:"blue",children:r}),l.jsx(P,{shape:"circle",icon:l.jsx(at,{}),size:"small",onClick:()=>Ee(u.key)})]})},"name"),l.jsx(b,{title:"钱包地址",dataIndex:"address",align:"center"},"address"),l.jsxs(G,{title:"ETH",className:"zks_eth",children:[l.jsx(b,{title:"ETH",dataIndex:"eth_balance",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"eth_balance"),l.jsx(b,{title:"Tx",dataIndex:"eth_tx_amount",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"eth_tx_amount")]}),l.jsxs(G,{title:"zkSyncLite",className:"zks_lite",children:[l.jsx(b,{title:"ETH",dataIndex:"zks1_balance",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"zks1_balance"),l.jsx(b,{title:"Tx",dataIndex:"zks1_tx_amount",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"zks1_tx_amount")]}),l.jsxs(G,{title:"zkSyncEra",className:"zks_era",children:[l.jsx(b,{title:"ETH",dataIndex:"zks2_balance",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"zks2_balance"),l.jsx(b,{title:"USDC",dataIndex:"zks2_usdcBalance",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"zks2_usdcBalance"),l.jsx(b,{title:"Tx",dataIndex:"zks2_tx_amount",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"zks2_tx_amount"),l.jsx(b,{title:"最后交易",dataIndex:"zks2_last_tx",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):l.jsx("a",{href:"https://explorer.zksync.io/address/"+u.address,target:"_blank",children:r})},"zks2_last_tx"),l.jsxs(G,{title:"官方桥跨链Tx数",className:"",children:[l.jsx(b,{title:"L1->L2",dataIndex:"l1Tol2Times",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"l1Tol2Times"),l.jsx(b,{title:"L2->L1",dataIndex:"l2Tol1Times",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"l2Tol1Times")]}),l.jsxs(G,{title:"官方桥跨链金额(ETH)",className:"",children:[l.jsx(b,{title:"L1->L2",dataIndex:"l1Tol2Amount",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"l1Tol2Amount"),l.jsx(b,{title:"L2->L1",dataIndex:"l2Tol1Amount",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"l2Tol1Amount")]}),l.jsxs(G,{title:"活跃统计",className:"",children:[l.jsx(b,{title:"日",dataIndex:"dayActivity",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"dayActivity"),l.jsx(b,{title:"周",dataIndex:"weekActivity",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"weekActivity"),l.jsx(b,{title:"月",dataIndex:"monthActivity",align:"center",render:(r,u)=>r===null?l.jsx(w,{}):r},"monthActivity")]})]}),l.jsx(b,{className:"action",title:"操作",align:"center",render:(r,u)=>l.jsx(lt,{size:"small",children:l.jsx(Be,{title:"确认删除？",onConfirm:()=>Ze(u.key),children:l.jsx(P,{icon:l.jsx(Ue,{})})})})},"action")]})}),l.jsx(Qe,{children:l.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",gap:"10px"},children:[l.jsx(P,{type:"primary",onClick:$e,size:"large",style:{width:"20%"},icon:l.jsx(it,{}),children:"添加地址"}),l.jsx(P,{type:"primary",onClick:Pe,size:"large",style:{width:"20%"},icon:l.jsx(et,{}),children:"批量添加地址"}),l.jsx(P,{type:"primary",onClick:fe,loading:S,size:"large",style:{width:"20%"},disabled:!d.length,icon:l.jsx(tt,{}),children:"刷新选中地址"}),l.jsx(Be,{title:"确认删除选中地址？",onConfirm:Ke,children:l.jsx(P,{type:"primary",danger:!0,size:"large",style:{width:"20%"},disabled:!d.length,icon:l.jsx(Ue,{}),children:"删除选中地址"})}),l.jsx(P,{type:"primary",icon:l.jsx(nt,{}),size:"large",style:{width:"8%"},onClick:Ve})]})})]})})}export{Lt as default};
